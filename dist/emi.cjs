"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function t(t,i){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,i){if(t){if("string"==typeof t)return e(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,i):void 0}}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=/*#__PURE__*/function(){function e(){this.idMap=void 0,this.fnMap=void 0,this.onceList=void 0,this.emitList=void 0,this.idMap=new Map,this.fnMap=new Map,this.onceList=new Set,this.emitList=null}var i=e.prototype;return i.addListener=function(e,t){var i,n=Symbol(),s=this.fnMap.get(e);return s||(s=new Set,this.fnMap.set(e,s)),s.add(n),this.idMap.set(n,e),t&&this.onceList.add(n),null==(i=this.emitList)||i.push(e),n},i.deleteListener=function(e){if(this.idMap.has(e)){var t=this.idMap.get(e),i=this.fnMap.get(t);this.onceList.delete(e),this.idMap.delete(e),i.delete(e),i.size||this.fnMap.delete(t),this.emitList=null}},i.deleteListeners=function(e){var i=this.fnMap.get(e);if(i){for(var n,s=t(i);!(n=s()).done;){var r=n.value;this.onceList.delete(r),this.idMap.delete(r)}this.fnMap.delete(e),this.emitList=null}},e}(),n=/*#__PURE__*/function(){function e(){this._events=void 0,this._events=new Map}var n=e.prototype;return n.on=function(e,t){var n=this._events.get(e);return n||(n=new i,this._events.set(e,n)),n.addListener(t)},n.once=function(e,t){var n=this._events.get(e);return n||(n=new i,this._events.set(e,n)),n.addListener(t,!0)},n.off=function(e,t){if(void 0!==e)if(void 0!==t){var i=this._events.get(e);i&&("function"==typeof t?i.deleteListeners(t):i.deleteListener(t),i.idMap.size||this._events.delete(e))}else this._events.delete(e);else this._events.clear()},n.emit=function(e){var i=this._events.get(e);if(i&&i.idMap.size){var n=i.emitList||[].concat(i.idMap.values());if(i.emitList=n,i.onceList.size)for(var s,r=t(i.onceList);!(s=r()).done;){var a=s.value;i.deleteListener(a)}for(var o=0,l=n.length;o<l;o++)n[o].apply(n,[].slice.call(arguments,1))}},e}(),s=/*#__PURE__*/function(){function e(){this._events=void 0,this._events=new Map}var i=e.prototype;return i._createEventData=function(e){var t={listeners:new Set,onceListeners:new Set,emitList:null};return this._events.set(e,t),t},i.on=function(e,t){var i=this._events.get(e)||this._createEventData(e),n=i.listeners,s=i.emitList;n.has(t)||(n.add(t),null==s||s.push(t))},i.once=function(e,t){var i=this._events.get(e)||this._createEventData(e),n=i.listeners,s=i.onceListeners,r=i.emitList;n.has(t)||(n.add(t),s.add(t),null==r||r.push(t))},i.off=function(e,t){if(void 0!==e)if(void 0!==t){var i=this._events.get(e);i&&(i.listeners.delete(t),i.onceListeners.delete(t),i.emitList=null,i.listeners.size||this._events.delete(e))}else this._events.delete(e);else this._events.clear()},i.emit=function(e,i){var n=this._events.get(e);if(n){var s=n.emitList||[].concat(n.listeners);if(n.onceListeners.size){n.emitList=null;for(var r,a=t(n.onceListeners);!(r=a()).done;)n.listeners.delete(r.value);n.onceListeners.clear()}else n.emitList=s;for(var o=0,l=s.length;o<l;o++)s[o](i)}},e}();exports.Emitter=n,exports.UniqueEmitter=s;
//# sourceMappingURL=emi.cjs.map
