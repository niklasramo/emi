"use strict";var o=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var m=(r,t)=>{for(var n in t)o(r,n,{get:t[n],enumerable:!0})},l=(r,t,n,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of p(t))!f.call(r,i)&&i!==n&&o(r,i,{get:()=>t[i],enumerable:!(e=v(t,i))||e.enumerable});return r};var c=r=>l(o({},"__esModule",{value:!0}),r);var h={};m(h,{Emitter:()=>u,EmitterDedupe:()=>d});module.exports=c(h);var d={ADD:"add",UPDATE:"update",IGNORE:"ignore",THROW:"throw"},u=class{constructor(t={}){let{dedupe:n=d.ADD,getId:e=()=>Symbol()}=t;this.dedupe=n,this.getId=e,this._events=new Map}_getListeners(t){let n=this._events.get(t);if(n){let{idMap:e}=n;if(e.size)return n.emitList=n.emitList||[...e.values()]}return null}on(t,n,e){let{_events:i}=this,s=i.get(t);s||(s={idMap:new Map,emitList:null},i.set(t,s));let{idMap:a,emitList:E}=s;if(e=e===void 0?this.getId(n):e,a.has(e))switch(this.dedupe){case d.THROW:throw new Error("Eventti: duplicate listener id!");case d.IGNORE:return e;case d.UPDATE:{s.emitList=null;break}default:a.delete(e),s.emitList=null}return a.set(e,n),E?.push(n),e}once(t,n,e){let i=!1;return e=e===void 0?this.getId(n):e,this.on(t,(...s)=>{i||(i=!0,this.off(t,e),n(...s))},e)}off(t,n){if(t===void 0){this._events.clear();return}if(n===void 0){this._events.delete(t);return}let e=this._events.get(t);e&&e.idMap.delete(n)&&(e.emitList=null,e.idMap.size||this._events.delete(t))}emit(t,...n){let e=this._getListeners(t);if(!e)return;let{length:i}=e;if(n.length)if(i===1)e[0](...n);else{let s=0;for(;s<i;s++)e[s](...n)}else if(i===1)e[0]();else{let s=0;for(;s<i;s++)e[s]()}}listenerCount(t){if(t===void 0){let n=0;return this._events.forEach((e,i)=>{n+=this.listenerCount(i)}),n}return this._events.get(t)?.idMap.size||0}};0&&(module.exports={Emitter,EmitterDedupe});
